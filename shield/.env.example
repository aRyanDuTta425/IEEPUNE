# =============================================================================
# SHIELD Configuration â€” Environment Variables
# Copy to .env and modify as needed: cp .env.example .env
# =============================================================================

# --- Deployment ---
SHIELD_MODE=mock                    # mock | lightweight | full
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=INFO                      # DEBUG | INFO | WARNING | ERROR
LOG_FORMAT=json                     # json | text

# --- Safety Thresholds ---
JAILBREAK_THRESHOLD=0.75            # Cosine similarity for jailbreak cluster match
PRIVACY_THRESHOLD=0.80              # Privacy risk score threshold
BLOCK_THRESHOLD=0.85                # Final score to trigger blocking
REVIEW_THRESHOLD=0.65               # Final score to flag for review

# --- Intent Graph Parameters ---
INTENT_GRAPH_ALPHA=0.3              # Risk propagation damping factor [0.0, 1.0]
INTENT_GRAPH_LAMBDA=0.001           # Time decay coefficient (per second)
INTENT_GRAPH_K_NEIGHBORS=3          # Edges to previous K turns
INTENT_GRAPH_MAX_ITERATIONS=10      # Max propagation iterations
INTENT_GRAPH_CONVERGENCE=0.001      # Convergence threshold
INTENT_SCORING_METHOD=max           # max | weighted_avg

# --- Clustering ---
HDBSCAN_MIN_CLUSTER_SIZE=5
HDBSCAN_MIN_SAMPLES=3
EMBEDDING_DIM=384
CLUSTER_METRIC=euclidean

# --- Performance Limits ---
MAX_CONVERSATION_LENGTH=50
MAX_JAILBREAK_CORPUS_SIZE=100000
REQUEST_TIMEOUT_SECONDS=30
IMAGE_DOWNLOAD_TIMEOUT=5
MAX_IMAGE_SIZE_MB=10
MAX_IMAGE_DIMENSION=1024

# --- File Paths ---
JAILBREAK_CORPUS_PATH=examples/sample_jailbreaks.json
CLUSTER_CACHE_PATH=examples/jailbreak_clusters.pkl
MULTITURN_DATASET_PATH=examples/sample_multiturn.json

# --- Model Configuration (Full Mode) ---
FACE_DETECTOR_MODEL=retinaface      # retinaface | facenet
AGE_ESTIMATOR_WEIGHTS=age_net.pth
CLIP_MODEL=ViT-B/32
SENTENCE_TRANSFORMER_MODEL=all-MiniLM-L6-v2

# --- Feature Flags ---
ENABLE_ASYNC_CLUSTERING=true
ENABLE_GRAPH_VISUALIZATION=false
ENABLE_METRICS=true
